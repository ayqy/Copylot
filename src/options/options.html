<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title data-i18n="optionsTitle">Prompt Manager - AI Copilot</title>
    <link rel="stylesheet" href="options.css" />
  </head>
  <body>
    <div class="container">
      <!-- Header -->
      <header class="header">
        <div class="header-content">
          <div class="logo-section">
            <svg width="32" height="32" viewBox="0 0 32 32" class="logo-icon">
              <defs>
                <filter id="shadow" x="-50%" y="-50%" width="200%" height="200%">
                  <feDropShadow dx="0" dy="2" stdDeviation="3" flood-color="rgba(0, 0, 0, 0.15)"/>
                </filter>
              </defs>
              <rect x="2" y="2" width="28" height="28" rx="8" ry="8" fill="#4F46E5" filter="url(#shadow)"/>
              <g transform="translate(16, 16)" fill="none" stroke="white" stroke-width="1.5">
                <g transform="scale(0.8) translate(-12, -12)">
                  <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                  <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                </g>
              </g>
            </svg>
            <div>
              <h1 data-i18n="promptManagerTitle">私人Prompt管理器</h1>
              <p data-i18n="promptManagerSubtitle">管理您的AI助手指令模板</p>
            </div>
          </div>
          <div class="header-actions">
            <button id="sync-status-btn" class="status-btn" title="同步状态">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21.5 2v6h-6M2.5 22v-6h6m11-2a10 10 0 1 1-5.93-9.14"/>
              </svg>
              <span id="sync-status-text" data-i18n="syncStatusConnected">已同步</span>
            </button>
            <button id="import-export-btn" class="secondary-btn" data-i18n="importExport">导入/导出</button>
          </div>
        </div>
      </header>

      <!-- Main Content -->
      <main class="main-content">
        <!-- Toolbar -->
        <div class="toolbar">
          <div class="search-section">
            <div class="search-box">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="11" cy="11" r="8"/>
                <path d="m21 21-4.35-4.35"/>
              </svg>
              <input type="text" id="search-input" placeholder="搜索prompt..." data-i18n-placeholder="searchPlaceholder">
            </div>
            <div class="filter-options">
              <select id="category-filter">
                <option value="all" data-i18n="allCategories">全部类型</option>
                <option value="summary" data-i18n="categorysummarize">总结</option>
                <option value="translate" data-i18n="categoryTranslate">翻译</option>
                <option value="coding" data-i18n="categoryCoding">编程</option>
                <option value="writing" data-i18n="categoryWriting">写作</option>
                <option value="custom" data-i18n="categoryCustom">自定义</option>
              </select>
            </div>
          </div>
          <div class="action-section">
            <button id="add-prompt-btn" class="primary-btn">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="12" y1="5" x2="12" y2="19"/>
                <line x1="5" y1="12" x2="19" y2="12"/>
              </svg>
              <span data-i18n="addNewPrompt">新建Prompt</span>
            </button>
            <div class="batch-action-dropdown">
              <button id="batch-action-btn" class="secondary-btn">
                <span data-i18n="batchActions">批量操作</span>
                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="6,9 12,15 18,9"/>
                </svg>
              </button>
              <div id="batch-action-menu" class="batch-menu">
                <button class="batch-menu-item" data-action="select-all">
                  <span data-i18n="selectAll">全选</span>
                </button>
                <button class="batch-menu-item" data-action="deselect-all">
                  <span data-i18n="deselectAll">取消全选</span>
                </button>
                <button class="batch-menu-item delete-action" data-action="delete-selected">
                  <span data-i18n="deleteSelected">批量删除</span>
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Usage Instructions -->
        <div id="usage-instructions" class="usage-instructions" style="display: none;">
          <div class="instruction-card">
          <h4 data-i18n="usageInstructionsTitle">💡 如何使用您的Prompt</h4>
            <div class="instruction-steps">
              <div class="step">
                <span class="step-number">1</span>
                <div class="step-content">
                <strong data-i18n="usageStep1Title">选择文本</strong><span data-i18n="usageStep1Desc">：在任意网页中选择您想要处理的文本内容</span>
                </div>
              </div>
              <div class="step">
                <span class="step-number">2</span>
                <div class="step-content">
                <strong data-i18n="usageStep2Title">右键菜单</strong><span data-i18n="usageStep2Desc">：右键点击选中的文本，在菜单中找到"Magic Copy with Prompt"</span>
                </div>
              </div>
              <div class="step">
                <span class="step-number">3</span>
                <div class="step-content">
                <strong data-i18n="usageStep3Title">选择Prompt</strong><span data-i18n="usageStep3Desc">：从子菜单中选择您刚才创建的Prompt模板</span>
                </div>
              </div>
              <div class="step">
                <span class="step-number">4</span>
                <div class="step-content">
                <strong data-i18n="usageStep4Title">自动复制</strong><span data-i18n="usageStep4Desc">：处理后的文本将自动复制到剪贴板，可直接粘贴到AI聊天界面</span>
                </div>
              </div>
            </div>
          <button id="hide-instructions-btn" class="secondary-btn" data-i18n="gotIt">我知道了</button>
          </div>
        </div>

        <!-- Prompt Grid -->
        <div class="content-area">
          <div id="prompts-grid" class="prompts-grid">
            <!-- Prompt cards will be dynamically inserted here -->
          </div>
          
          <!-- Empty State -->
          <div id="empty-state" class="empty-state" style="display: none;">
            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
              <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/>
              <polyline points="14,2 14,8 20,8"/>
              <line x1="16" y1="13" x2="8" y2="13"/>
              <line x1="16" y1="17" x2="8" y2="17"/>
              <polyline points="10,9 9,9 8,9"/>
            </svg>
            <h3 data-i18n="emptyStateTitle">还没有任何Prompt</h3>
            <p data-i18n="emptyStateDescription">
              创建您的第一个Prompt模板，让AI助手更高效地理解您的需求。
              <br><br>
              <button id="create-first-prompt-btn" class="primary-btn" data-i18n="createFirstPrompt">创建第一个Prompt</button>
            </p>
          </div>
        </div>
      </main>

      <!-- Floating Action Button for mobile -->
      <button id="mobile-add-btn" class="mobile-add-btn">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="12" y1="5" x2="12" y2="19"/>
          <line x1="5" y1="12" x2="19" y2="12"/>
        </svg>
      </button>
    </div>

    <!-- Prompt Editor Modal -->
    <div id="prompt-editor-modal" class="modal" style="display: none;">
      <div class="modal-backdrop"></div>
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="modal-title" data-i18n="editPrompt">编辑Prompt</h2>
          <button id="close-modal-btn" class="close-btn">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="6" x2="6" y2="18"/>
              <line x1="6" y1="6" x2="18" y2="18"/>
            </svg>
          </button>
        </div>
        <form id="prompt-form" class="modal-form">
          <input type="hidden" id="prompt-id">
          
          <div class="form-row">
            <div class="form-group">
              <label for="prompt-title" data-i18n="promptTitle">标题</label>
              <input type="text" id="prompt-title" required placeholder="为您的prompt起个名字">
            </div>
            <div class="form-group">
              <label for="prompt-category" data-i18n="promptCategory">类型</label>
              <select id="prompt-category">
                <option value="custom" data-i18n="categoryCustom">自定义</option>
                <option value="summary" data-i18n="categoryQuick">总结</option>
                <option value="translate" data-i18n="categoryTranslate">翻译</option>
                <option value="coding" data-i18n="categoryCoding">编程</option>
                <option value="writing" data-i18n="categoryWriting">写作</option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label for="prompt-template" data-i18n="promptTemplate">模板内容</label>
            <div class="editor-container">
              <textarea id="prompt-template" rows="8" required 
                placeholder="请输入您的prompt模板，使用 {content} 作为内容占位符&#10;例如：&#10;请总结以下内容的要点：&#10;&#10;{content}&#10;&#10;请用简洁的语言概括核心信息。"></textarea>
              <div class="editor-tools">
                <button type="button" id="insert-content-placeholder" class="tool-btn" title="插入内容占位符">
                  <span>{content}</span>
                </button>
                <button type="button" id="preview-prompt" class="tool-btn" title="预览">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                    <circle cx="12" cy="12" r="3"/>
                  </svg>
                </button>
              </div>
            </div>
            <div class="template-hint">
              <p data-i18n="templateHint">使用 <code>{content}</code> 作为复制内容的占位符</p>
            </div>
          </div>

          <div class="form-actions">
            <button type="button" id="cancel-btn" class="secondary-btn" data-i18n="cancel">取消</button>
            <button type="submit" id="save-btn" class="primary-btn" data-i18n="save">保存</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Import/Export Modal -->
    <div id="import-export-modal" class="modal" style="display: none;">
      <div class="modal-backdrop"></div>
      <div class="modal-content">
        <div class="modal-header">
          <h2 data-i18n="importExportTitle">导入/导出Prompts</h2>
          <button id="close-import-export-btn" class="close-btn">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="6" x2="6" y2="18"/>
              <line x1="6" y1="6" x2="18" y2="18"/>
            </svg>
          </button>
        </div>
        <div class="modal-form">
          <div class="import-export-tabs">
            <button class="tab-btn active" data-tab="export" data-i18n="export">导出</button>
            <button class="tab-btn" data-tab="import" data-i18n="import">导入</button>
          </div>
          
          <div id="export-tab" class="tab-content active">
            <div class="import-export-row">
              <p data-i18n="exportDescription">导出您的所有Prompts为JSON文件，可用于备份或迁移到其他设备。</p>
              <button id="export-btn" class="primary-btn" data-i18n="exportNow">立即导出</button>
            </div>
          </div>
          
          <div id="import-tab" class="tab-content">
            <div class="import-export-row">
              <p data-i18n="importDescription">从JSON文件导入Prompts。这将会与现有的Prompts合并。</p>
              <button id="import-btn" class="secondary-btn" data-i18n="selectFile">选择文件</button>
            </div>
            <input type="file" id="import-file" accept=".json" style="display: none;">
            <div id="import-preview" style="display: none;">
              <h4 data-i18n="importPreview">导入预览</h4>
              <div id="import-list"></div>
              <button id="confirm-import-btn" class="primary-btn" data-i18n="confirmImport">确认导入</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Preview Modal -->
    <div id="preview-modal" class="modal" style="display: none;">
      <div class="modal-backdrop"></div>
      <div class="modal-content preview-modal">
        <div class="modal-header">
          <h2 data-i18n="previewTitle">Prompt预览</h2>
          <button id="close-preview-btn" class="close-btn">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="6" x2="6" y2="18"/>
              <line x1="6" y1="6" x2="18" y2="18"/>
            </svg>
          </button>
        </div>
        <div class="preview-content">
          <div class="preview-input">
            <label data-i18n="sampleContent">示例内容：</label>
            <textarea id="preview-sample" placeholder="输入一些示例内容来预览效果...">这是一段示例文本，用来演示prompt的效果。</textarea>
          </div>
          <div class="preview-output">
            <label data-i18n="outputResult">最终输出：</label>
            <div id="preview-result" class="preview-result"></div>
          </div>
        </div>
      </div>
    </div>

    <script type="module" src="options.js"></script>
  </body>
</html> 